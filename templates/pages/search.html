<div class="mp-archive">
    <div class="mp-archive__container">
        <!-- Breadcrumb -->
        <nav class="mp-breadcrumb">
            <a href="/">Domov</a>
            <span class="mp-breadcrumb__sep">‚Ä∫</span>
            <span class="mp-breadcrumb__current">Vyhƒæad√°vanie: "{{.query}}"</span>
        </nav>
        
        <!-- Search Header -->
        <div class="mp-category-header" style="margin-bottom: 24px;">
            <h1 class="mp-category-header__title">V√Ωsledky vyhƒæad√°vania</h1>
        </div>
        
        <p style="color: #6b7280; margin-bottom: 24px;">
            Pre v√Ωraz "<strong>{{.query}}</strong>" sme na≈°li <strong>{{.total}}</strong> produktov
        </p>
        
        <!-- Toolbar -->
        {{if gt .total 0}}
        <div class="mp-toolbar">
            <span class="mp-toolbar__count">Zobrazen√© {{len .products}} z {{.total}}</span>
            <select class="mp-toolbar__sort" onchange="window.location.href=this.value">
                <option value="?q={{.query}}&sort=relevance"{{if eq .sort "relevance"}} selected{{end}}>Najrelevantnej≈°ie</option>
                <option value="?q={{.query}}&sort=price_asc"{{if eq .sort "price_asc"}} selected{{end}}>Najlacnej≈°ie</option>
                <option value="?q={{.query}}&sort=price_desc"{{if eq .sort "price_desc"}} selected{{end}}>Najdrah≈°ie</option>
                <option value="?q={{.query}}&sort=newest"{{if eq .sort "newest"}} selected{{end}}>Najnov≈°ie</option>
            </select>
        </div>
        {{end}}
        
        <!-- Products List -->
        <div class="mp-products-list" id="mp-products">
            {{range $index, $product := .products}}
            <div class="mp-product-row">
                <div class="mp-product-row__rank">
                    <span class="mp-rank-badge{{if lt $index 3}} mp-badge--top10{{end}}">
                        {{add $index 1}}
                    </span>
                </div>
                <div class="mp-product-row__image">
                    {{if .ImageURL}}
                    <img src="{{.ImageURL}}" alt="{{.Title}}" loading="lazy">
                    {{else}}
                    <div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#f3f4f6;font-size:32px;">üì¶</div>
                    {{end}}
                </div>
                <div class="mp-product-row__content">
                    <a href="/produkt/{{.Slug}}" class="mp-product-row__title">{{.Title}}</a>
                    {{if .ShortDescription}}
                    <p class="mp-product-row__desc">{{.ShortDescription}}</p>
                    {{end}}
                    <div class="mp-product-row__meta">
                        {{if gt .Rating 0}}
                        <div class="mp-product-row__rating">
                            <span class="mp-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                            <span>{{printf "%.1f" .Rating}}</span>
                        </div>
                        {{end}}
                        {{if .CategoryName}}
                        <span style="color: #6b7280; font-size: 13px;">{{.CategoryName}}</span>
                        {{end}}
                        <span class="mp-product-row__offers">{{.OfferCount}} pon√∫k</span>
                    </div>
                </div>
                <div class="mp-product-row__price-box">
                    <span class="mp-product-row__price">{{printf "%.2f" .MinPrice}} ‚Ç¨</span>
                    <a href="/produkt/{{.Slug}}" class="mp-product-row__btn">
                        Porovna≈•
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>
            </div>
            {{else}}
            <div class="mp-no-products" style="text-align: center; padding: 60px 20px; background: #fff; border-radius: 16px;">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="1.5">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                </svg>
                <h3 style="font-size: 18px; color: #1f2937; margin: 16px 0 8px;">≈Ωiadne v√Ωsledky</h3>
                <p style="font-size: 14px; color: #6b7280; margin: 0;">
                    Pre v√Ωraz "{{.query}}" sme nena≈°li ≈æiadne produkty.<br>
                    Sk√∫ste upravi≈• hƒæadan√Ω v√Ωraz alebo vyberte kateg√≥riu.
                </p>
                <div style="margin-top: 24px;">
                    <a href="/" class="mp-btn mp-btn--primary">Sp√§≈• na hlavn√∫ str√°nku</a>
                </div>
            </div>
            {{end}}
        </div>
        
        <!-- Pagination -->
        {{if gt .totalPages 1}}
        <div class="mp-pagination">
            {{if gt .page 1}}
            <a href="?q={{.query}}&page={{sub .page 1}}&sort={{.sort}}">‚Üê Predo≈°l√°</a>
            {{end}}
            
            {{range $p := .pagination}}
            {{if eq $p $.page}}
            <span class="active">{{$p}}</span>
            {{else}}
            <a href="?q={{$.query}}&page={{$p}}&sort={{$.sort}}">{{$p}}</a>
            {{end}}
            {{end}}
            
            {{if lt .page .totalPages}}
            <a href="?q={{.query}}&page={{add .page 1}}&sort={{.sort}}">ƒéal≈°ia ‚Üí</a>
            {{end}}
        </div>
        {{end}}
    </div>
</div>
